<div class="agregarproducto-form-container">
    <form method="POST" enctype="multipart/form-data" action="{% url 'addProductMantencion' %}">
        <h1 class="agregarproducto-form-title">Agregar Productos</h1>
        {% csrf_token %}
        
        <!-- Renderizar el management_form del formset -->
        {{ formset.management_form }}
        
        <!-- Iterar sobre cada formulario dentro del formset -->
        {% for form in formset %}
        <fieldset class="agregarproducto-form-group">
            <legend class="agregarproducto-form-title">Producto {{ forloop.counter }}</legend>
            
            {% for field in form %}
            <div class="agregarproducto-form-field">
                <label class="agregarproducto-form-label" for="{{ field.id_for_label }}">{{ field.label }}</label>
                {{ field }}
                <!-- Mostrar errores de validación si existen -->
                {% if request.method == 'POST' %}
                    {% for error in field.errors %}
                    <div class="text-danger">{{ error }}</div>
                    {% endfor %}
                {% endif %}
            </div>
            {% endfor %}
        </fieldset>
        {% endfor %}
         <!-- Botón para agregar más formularios -->
        <button type="button" id="add-producto-btn" class="btn btn-primary mt-3">+ Agregar Producto</button>
        <button type="submit" class="agregarproducto-button">Guardar Productos</button>
        <div class="submit-button">
            <button type="submit" class="agregarproducto-button">Agregar Productos</button>
        </div>
    </form>
    <h4><a href="{% url 'mantencion' %}"><i class="fas fa-arrow-left"></i> Volver</a></h4>
</div>
